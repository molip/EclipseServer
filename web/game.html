<!DOCTYPE HTML>
<html>
<head>

<script src="game.js"></script>
<script src="input.js"></script>
<script src="output.js"></script>
<script src="map.js"></script>
<script src="explore.js"></script>
<script src="influence.js"></script>
<script src="colonise.js"></script>
<script src="research.js"></script>
<script src="build.js"></script>
<script src="move.js"></script>
<script src="upgrade.js"></script>
<script src="diplomacy.js"></script>
<script src="trade.js"></script>

<script>
    data.playerID = %PLAYER_ID%
    var webSocketURL = "%WSURL%"
</script>

</head>
<body onload="load()">
<style>
    body {
        font-family:'Tahoma'
    }
    h2 {
        font-family: Impact;
    }
    #output {
        height:120px; font:12px Courier; overflow:auto; border:1px solid;

    }
	.panel {
        border:1px solid;
		display:none;
	}
    #game_list_panel {
        padding:5px;
    }
	.blanket {
		position:fixed;
		width:100%;
		height:100%;
		top:0px;
		left:0px;
		z-index:1000;
		display:none;
	}
	.throbber {
        background-image:url(images/throbber6.gif);
        background-position:center;
		background-repeat:no-repeat;
	}
	.shroud {
		background-color:rgba(255, 255, 255, 0.8);
	}
	.shroud_text {
		text-align:center;
		vertical-align:middle;
		display:table-cell;
	}
</style>
<div id="blanket" class="blanket throbber"></div>
<div id="shroud" class="blanket shroud"><div class="shroud_text">Lost connection</div></div>
<div id="game_list_panel" class="panel">
	<h2>Game List</h2> 
	<div id="game_list_content">
	</div>
</div>
<div id="lobby_panel" class="panel">
	<h2>Lobby</h2> 
	<a href="Back to game list" onclick="SendExitGame();return false;">Back to game list</a>
	<div id="lobby_content">
	</div>
	<div id="lobby_owner_controls">
	</div>
</div>
<div id="choose_panel" class="panel">
	<h2>Choose Team</h2> 
	<a href="Back to game list" onclick="SendExitGame();return false;">Back to game list</a>
	<div id="choose_team_content"></div>
	<div id="choose_team"></div>
</div>
<div id="game_panel" class="panel" style="height:640px">
	<div id="map_panel" style="margin:5px; float:left;">
		<div id="map_ctrls" style="height:27px"> <!-- Ensure map_canvas doesn't move after loading-->
			<input type = "image" id="map_zoom_in_btn" src="/images/btn_zoom_in.png" onclick="Map.Zoom(-1)">
			<input type = "image" id="map_zoom_out_btn" src="/images/btn_zoom_out.png" onclick="Map.Zoom(1)">
			<input type = "image" id="map_pan_left_btn" src="/images/btn_pan_l.png" onclick="Map.PanX(-1)">
			<input type = "image" id="map_pan_right_btn" src="/images/btn_pan_r.png" onclick="Map.PanX(1)">
			<input type = "image" id="map_pan_up_btn" src="/images/btn_pan_u.png" onclick="Map.PanY(-1)">
			<input type = "image" id="map_pan_down_btn" src="/images/btn_pan_d.png" onclick="Map.PanY(1)">
			<input type = "image" id="map_pan_centre_btn" src="/images/btn_pan_centre.png" onclick="Map.PanCentre()">
			<span style="float:right">Round:<span id="round_count"></span></span>
		</div>
		<div id="map">
			<canvas id="map_canvas" width="600" height="600" style="background-color:black"></canvas>
		</div>
	</div>
	<div id="players" style="border:1px solid; margin:5px 5px 5px 610px; padding:5px; float:none"> <!-- "float:none" uses all remaining width -->
		<div id="game_tabs"></div>
		<div id="game_pages"></div>
		<div id="supply_page">
			<b>Technologies</b><br>
			<div id="supply_technologies"></div>
		</div>
	</div>

	<div id="live_ui">
		<a href="Back to game list" onclick="SendExitGame();return false;">Back to game list</a>
		<a href="Review game" onclick="SendStartReview();return false;">Review game</a>
		<div id="choose_upkeep" style="display:none">
			Upkeep Phase
			<button type="button" id="finish_upkeep_btn" onclick="SendFinishUpkeep()">Finish</button>
		</div>
		<div id="choose_undo" style="display:none">
			<button type="button" id="choose_undo_btn" onclick="SendChooseUndo()">Undo</button>
		</div>
		<div id="choose_subaction" style="display:none">
			<button id="choose_action_colonise_btn" type="button" onclick="SendChooseAction('colonise')">Colonise</button>
			<button id="choose_action_diplomacy_btn" type="button" onclick="SendChooseAction('diplomacy')">Diplomacy</button>
			<button id="choose_action_trade_btn" type="button" onclick="SendChooseAction('trade')">Trade</button>
			<button id="choose_action_bankrupt_btn" type="button" onclick="alert('NYI')">Bankrupt</button>
			</div>
		<div id="choose_action" style="display:none">
			<button id="choose_action_explore_btn" type="button" onclick="SendChooseAction('explore')">Explore</button>
			<button id="choose_action_influence_btn" type="button" onclick="SendChooseAction('influence')">Influence</button>
			<button id="choose_action_research_btn" type="button" onclick="SendChooseAction('research')">Research</button>
			<button id="choose_action_upgrade_btn" type="button" onclick="SendChooseAction('upgrade')">Upgrade</button>
			<button id="choose_action_build_btn" type="button" onclick="SendChooseAction('build')">Build</button>
			<button id="choose_action_move_btn" type="button" onclick="SendChooseAction('move')">Move</button>
			<button id="choose_action_pass_btn" type="button" onclick="SendChooseAction('pass')">Pass</button>
			<button id="choose_end_turn_btn" type="button" onclick="SendChooseCommit()">End Turn</button>
		</div>
		<div id="choose_explore_pos" style="display:none">
			Choose hex to explore...
			<button id="choose_explore_pos_btn" type="button" onclick="data.action.SendPos()">Next</button>
			<button id="choose_explore_pos_reject_btn" type="button" onclick="SendAbort()">Skip</button>
		</div>
		<div id="choose_explore_hex" style="display:none">
			Choose hex placement...
				<button type="button" onclick="data.action.Rotate(-1)">&lt;-</button>
				<button type="button" onclick="data.action.Rotate(1)">-&gt;</button>
			<button id="choose_explore_hex_switch_btn" type="button" onclick="data.action.Switch()">Switch Hex</button>
			<button id="choose_explore_hex_take_btn" type="button" onclick="data.action.SendTake()">Take another</button>
			<input type = "checkbox" id="choose_explore_hex_influence_check">Influence</input>
			<button type="button" onclick="data.action.SendHex()">Next</button>
			<button type="button" onclick="SendAbort()">Reject</button>
		</div>
		<div id="choose_explore_discovery" style="display:none">
			You have discovered something!
			<button id="choose_explore_discovery" type="button" onclick="data.action.SendDiscovery()">Next</button>
		</div>
		<div id="choose_influence_src" style="display:none">
			Choose disc to move...
			<button id="choose_influence_src_btn" type="button" onclick="data.action.Send()">Next</button>
			<button type="button" onclick="SendAbort()">Finish</button>
		</div>
		<div id="choose_influence_dst" style="display:none">
			Choose disc destination...
			<button id="choose_influence_dst_btn" type="button" onclick="data.action.Send()">Next</button>
		</div>
		<div id="choose_colonise_pos" style="display:none">
			Choose hex to colonise...
			<button id="choose_colonise_pos_btn" type="button" onclick="data.action.Send()">Next</button>
		</div>
		<div id="choose_colonise_squares" style="display:none">
			Choose squares to colonise...
			<div id="choose_colonise_squares_content">
			</div>
			<button id="choose_colonise_squares_btn" type="button" onclick="data.action.Send()">Next</button>
		</div>
		<div id="choose_research" style="display:none">
			Choose technology to research...
			<select id="select_tech"></select>
			<button id="choose_research_btn" type="button" onclick="data.action.Send()">Next</button>
			<button id="choose_research_reject_btn" type="button" onclick="SendAbort()">Finish</button>
		</div>
		<div id="choose_research_artifact" style="display:none">
			Choose artifact distribution (<span id="choose_research_artifactkey_count"></span> remaining):<br>
			<input id="choose_research_artifact_text0" type="text" value="0" size="1" disabled> 
			<button id="choose_research_artifact_minus0" type="button" onclick="data.action.OnButton(this, 0, -1)">-</button>
			<button id="choose_research_artifact_plus0" type="button" onclick="data.action.OnButton(this, 0, 1)">+</button>

			<input id="choose_research_artifact_text1" type="text" value="0" size="1" disabled> 
			<button id="choose_research_artifact_minus1" type="button" onclick="data.action.OnButton(this, 1, -1)">-</button>
			<button id="choose_research_artifact_plus1" type="button" onclick="data.action.OnButton(this, 1, 1)">+</button>

			<input id="choose_research_artifact_text2" type="text" value="0" size="1" disabled> 
			<button id="choose_research_artifact_minus2" type="button" onclick="data.action.OnButton(this, 2, -1)">-</button>
			<button id="choose_research_artifact_plus2" type="button" onclick="data.action.OnButton(this, 2, 1)">+</button>
			<button id="choose_research_artifact_next" type="button" onclick="data.action.Send()">Next</button>
		</div>
		<div id="choose_build" style="display:none">
			Choose hex and thing to build:
			<select id="select_build"></select>
			<button id="choose_build_btn" type="button" onclick="data.action.Send()">Next</button>
			<button id="choose_build_reject_btn" type="button" onclick="SendAbort()">Finish</button>
		</div>
		<div id="choose_move_src" style="display:none">
			Choose hex and ship to move:
			<select id="select_move_ship"></select>
			<button id="choose_move_src_btn" type="button" onclick="data.action.SendPos()">Next</button>
			<button id="choose_move_src_reject_btn" type="button" onclick="SendAbort()">Skip</button>
		</div>
		<div id="choose_move_dst" style="display:none">
			Choose hex to move to:
			<button id="choose_move_dst_btn" type="button" onclick="data.action.SendPos()">Next</button>
		</div>
		<div id="choose_upgrade" style="display:none">
			Upgrade
		</div>
		<div id="choose_diplomacy" style="display:none">
			Diplomacy
		</div>
		<div id="choose_trade" style="display:none">
			Trade: convert <select id="select_trade_from" onchange="data.action.OnSelectFrom()"></select> x 
			<input id="choose_trade_text" type="text" value="0" size="1" disabled> 
			<button id="choose_trade_minus" type="button" onclick="data.action.OnButton(this, -1)">-</button>
			<button id="choose_trade_plus" type="button" onclick="data.action.OnButton(this, 1)">+</button>
			into <select id="select_trade_to"></select> x <span id="trade_result_content"></span>
			<button id="choose_trade_finish" type="button" onclick="data.action.Send()">Finish</button>
		</div>
	</div>
	<div id="review_ui">
		<a href="Back to game" onclick="SendExitReview();return false;">Back to game</a>
		<button id="retreat_review" type="button" onclick="SendRetreatReview()"><<</button>
		<button id="advance_review" type="button" onclick="SendAdvanceReview()">>></button>
	</div>
	<br>
	<div id="hex_info" class="panel" style="display:none">
		<b>Hex information</b>
		<div id="hex_info_content"></div>
	</div>
</div>
<br>
<div id="output" style="clear:both">
</div>
</body>
</html>
