<!DOCTYPE HTML>
<html>
<head>
<script type="text/javascript">

var output
var ws

function SendMessage()
{
    var textbox = document.getElementById('textbox'); 
	ws.send(textbox.value);
	textbox.value = '';
}

function writeToScreen(message)
{
    var pre = document.createElement("p");
    pre.style.wordWrap = "break-word";
    pre.innerHTML = message;
    output.appendChild(pre);
}
  
function load()
{
	output = document.getElementById("output");

	if ("WebSocket" in window)
	{
		ws = new WebSocket("ws://localhost:9998/echo");

		ws.onopen = function()
		{
			writeToScreen('OPENED\n')
			ws.send('REGISTER %GAME% %PLAYER%');
		};
		ws.onmessage = function (evt) 
		{ 
			writeToScreen(evt.data + '\n')
		};
		ws.onclose = function()
		{ 
			writeToScreen('CLOSED\n')
		};
	}
	else
	{
	 // The browser doesn't support WebSocket
	 alert("WebSocket NOT supported by your Browser!");
	}
}

</script>
</head>
<body onload="load()">
<div id="output"></div>
</body>
</html>
